"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const i="https://mem-cli-server-482a8c7c1299.herokuapp.com/mem-cli";function u(s,t){const e=s.split("").map(a=>a.charCodeAt(0)),n={contractOwner:"",contentType:"application/javascript",contractSrc:e,initState:t},o=[{name:"Content-Type",value:"application/javascript"},{name:"Owner",value:""},{name:"App-Name",value:"EM"},{name:"Type",value:"Serverless-Function"},{name:"EM-Bundled",value:"true"},{name:"Size",value:String(e.length)}];return{dataTx:n,tags:o}}class d{async readFunction(t){const e=`https://api.mem.tech/api/state/${t}`,n=await fetch(e);if(n.ok)return await n.json();throw new Error(n.statusText)}async writeFunction(t,e){const n="https://api.mem.tech/api/transactions",c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({functionId:t,inputs:[{input:e}]})},r=await fetch(n,c);if(r.ok)return await r.json();throw new Error(r.statusText)}async deployFunction(t,e){const n=JSON.stringify(u(t,e)),a=await fetch(i,{method:"post",url:i,body:n,headers:{Accept:"application/json","Content-Type":"application/json"},maxContentLength:1e8,maxBodyLength:1e9});if(a.ok)return{id:(await a.json()).txid};throw new Error(a.statusText)}}class p extends d{async read(t){return await this.readFunction(t)}async write(t,e){return await this.writeFunction(t,e)}async deploy(t,e){return await this.deployFunction(t,e)}}class l extends p{}exports.Actions=p;exports.Mem=l;
